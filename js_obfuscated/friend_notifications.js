const _0x40a3e1=_0x2254;(function(_0x487814,_0x3671d0){const _0x106e79=_0x2254,_0x3e213c=_0x487814();while(!![]){try{const _0x511229=parseInt(_0x106e79(0xe9))/0x1*(-parseInt(_0x106e79(0xf1))/0x2)+-parseInt(_0x106e79(0x116))/0x3*(parseInt(_0x106e79(0xf2))/0x4)+-parseInt(_0x106e79(0xce))/0x5*(parseInt(_0x106e79(0xe0))/0x6)+parseInt(_0x106e79(0x124))/0x7*(parseInt(_0x106e79(0xd4))/0x8)+parseInt(_0x106e79(0x11d))/0x9+parseInt(_0x106e79(0x11f))/0xa*(parseInt(_0x106e79(0x11e))/0xb)+-parseInt(_0x106e79(0xf8))/0xc*(-parseInt(_0x106e79(0x101))/0xd);if(_0x511229===_0x3671d0)break;else _0x3e213c['push'](_0x3e213c['shift']());}catch(_0xebb6f9){_0x3e213c['push'](_0x3e213c['shift']());}}}(_0x1e5b,0x4aaa0));function _0x2254(_0x29d621,_0x4bdc5d){const _0x1e5bf0=_0x1e5b();return _0x2254=function(_0x225450,_0x39a09a){_0x225450=_0x225450-0xcd;let _0x23c429=_0x1e5bf0[_0x225450];return _0x23c429;},_0x2254(_0x29d621,_0x4bdc5d);}let notificationCount=0x0,lastNotificationCheck=Date[_0x40a3e1(0xd3)]();function initFriendNotifications(){const _0x8923e=_0x40a3e1;if(typeof currentUser===_0x8923e(0xfa)||currentUser['type']!==_0x8923e(0x127))return;checkFriendNotifications(),setInterval(checkFriendNotifications,0x1388),addNotificationBadge();}function addNotificationBadge(){const _0x521532=_0x40a3e1;$(_0x521532(0xd2))[_0x521532(0x122)](function(){const _0xff5708=_0x521532;!$(this)[_0xff5708(0xf7)](_0xff5708(0xda))[_0xff5708(0x114)]&&($(this)[_0xff5708(0x115)]('position',_0xff5708(0xf4)),$(this)[_0xff5708(0xd0)](_0xff5708(0xfb)));});}function checkFriendNotifications(){const _0x5c8f34=_0x40a3e1;$[_0x5c8f34(0x107)]({'url':_0x5c8f34(0xed),'method':_0x5c8f34(0xff),'data':{'action':_0x5c8f34(0x119)},'dataType':_0x5c8f34(0x109),'success':function(_0x33148f){const _0x1c78e7=_0x5c8f34;if(_0x33148f[_0x1c78e7(0x113)]===_0x1c78e7(0x117)){const _0x4fd8db=_0x33148f[_0x1c78e7(0xcf)];_0x4fd8db>notificationCount&&notificationCount>0x0&&showNotificationPopup(_0x33148f[_0x1c78e7(0xde)][0x0]),notificationCount=_0x4fd8db,updateNotificationBadge(_0x4fd8db),$('#friendsPanel')['is'](':visible')&&updateNotificationList(_0x33148f[_0x1c78e7(0xde)]);}},'error':function(_0x52012f,_0x34c8ae,_0x364852){const _0x2935e1=_0x5c8f34;console[_0x2935e1(0x125)]('Failed\x20to\x20check\x20notifications:',_0x364852);}});}function updateNotificationBadge(_0x3b9db9){const _0x285efa=_0x40a3e1;$(_0x285efa(0xda))['each'](function(){const _0x23b39d=_0x285efa;_0x3b9db9>0x0?($(this)[_0x23b39d(0x121)](_0x3b9db9)[_0x23b39d(0xe7)](),$(this)[_0x23b39d(0x11a)]()[_0x23b39d(0xf6)](_0x23b39d(0xe6))):($(this)[_0x23b39d(0xd9)](),$(this)[_0x23b39d(0x11a)]()[_0x23b39d(0x10f)](_0x23b39d(0xe6)));});}function showNotificationPopup(_0x168ed2){const _0x4ce372=_0x40a3e1,_0x4d4dd2=$(_0x4ce372(0x108)+(_0x168ed2[_0x4ce372(0x106)]||_0x4ce372(0xf3))+_0x4ce372(0xe2)+getNotificationTitle(_0x168ed2[_0x4ce372(0xe4)])+_0x4ce372(0xe5)+_0x168ed2[_0x4ce372(0x118)]+_0x4ce372(0x10c));$(_0x4ce372(0xdb))['append'](_0x4d4dd2),_0x4d4dd2[_0x4ce372(0x10e)](),setTimeout(()=>{const _0x107852=_0x4ce372;_0x4d4dd2[_0x107852(0x128)](function(){const _0x31c7b4=_0x107852;$(this)[_0x31c7b4(0x126)]();});},0x1388),playFriendNotificationSound();}function _0x1e5b(){const _0x402a04=['4764rBdbFa','floor','undefined','<span\x20class=\x22notification-badge\x22\x20style=\x22display:none;\x22>0</span>','\x22\x20data-id=\x22','friend_request','mark_read','GET','just\x20now','21229onnqtg','notificationSound','ready','play','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<img\x20src=\x22images/','from_avatar','ajax','\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22friend-notification-popup\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22notification-popup-header\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<img\x20src=\x22images/','json','</div>','getElementById','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22notification-popup-close\x22\x20onclick=\x22$(this).closest(\x27.friend-notification-popup\x27).fadeOut()\x22>Ã—</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20','#notificationSound','fadeIn','removeClass','New\x20Message','/sounds/private_message_notification.mp3','created_at','status','length','css','6cjrVfy','success','message','get_notifications','parent','prepend','\x20hours\x20ago','1358217KpRMWh','33WLcqUD','1571070nAIgIV','Notification','text','each','.notification-item','35JTJTke','error','remove','user','fadeOut','POST','friend_accepted','26245nUYxVd','count','append','function','.friends-btn','now','709304nWNKSC','<button\x20class=\x22btn\x20btn-sm\x20btn-secondary\x20w-100\x20mt-2\x22\x20onclick=\x22markAllNotificationsRead()\x22>Mark\x20all\x20as\x20read</button>','log','showFriendsPanel','replaceWith','hide','.notification-badge','body','<h6\x20style=\x22color:\x20#e0e0e0;\x22><i\x20class=\x22fas\x20fa-bell\x22></i>\x20Notifications</h6>','catch','notifications','New\x20Friend\x20Request','672GbSAEA','Friend\x20Request\x20Accepted','\x22\x20class=\x22notification-popup-avatar\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22notification-popup-content\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22notification-popup-title\x22>','\x20min\x20ago','type','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22notification-popup-message\x22>','has-notifications','show','volume','559492hUvQJM','\x20days\x20ago','#friendsList\x20.notifications-section','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22notification-time\x22>','api/friends.php','<div\x20class=\x22notifications-section\x20mb-3\x22>','unread','#friendsList','2SBNZFZ','521292KPmQNE','default_avatar.jpg','relative','forEach','addClass','find'];_0x1e5b=function(){return _0x402a04;};return _0x1e5b();}function playFriendNotificationSound(){const _0x525d73=_0x40a3e1,_0x456d39=new Audio(_0x525d73(0x111));_0x456d39[_0x525d73(0x104)]();}function getNotificationTitle(_0x381807){const _0x5de715=_0x40a3e1;switch(_0x381807){case _0x5de715(0xfd):return _0x5de715(0xdf);case _0x5de715(0xcd):return _0x5de715(0xe1);case'private_message':return _0x5de715(0x110);default:return _0x5de715(0x120);}}function updateNotificationList(_0x12822b){const _0xbacab1=_0x40a3e1;let _0x3ed1fc=_0xbacab1(0xee);_0x3ed1fc+=_0xbacab1(0xdc),_0x12822b[_0xbacab1(0x114)]===0x0?_0x3ed1fc+='<p\x20class=\x22text-muted\x20small\x22>No\x20new\x20notifications</p>':(_0x12822b[_0xbacab1(0xf5)](_0x3e88e8=>{const _0x1ce3f5=_0xbacab1,_0x28a36b=getTimeAgo(new Date(_0x3e88e8[_0x1ce3f5(0x112)])),_0x113f29=_0x3e88e8['is_read']==0x0?_0x1ce3f5(0xef):'';_0x3ed1fc+='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22notification-item\x20'+_0x113f29+_0x1ce3f5(0xfc)+_0x3e88e8['id']+_0x1ce3f5(0x105)+(_0x3e88e8[_0x1ce3f5(0x106)]||'default_avatar.jpg')+'\x22\x20class=\x22notification-avatar\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22notification-content\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22notification-message\x22>'+_0x3e88e8[_0x1ce3f5(0x118)]+_0x1ce3f5(0xec)+_0x28a36b+'</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20';}),_0x3ed1fc+=_0xbacab1(0xd5)),_0x3ed1fc+=_0xbacab1(0x10a),$(_0xbacab1(0xeb))[_0xbacab1(0x114)]?$('#friendsList\x20.notifications-section')[_0xbacab1(0xd8)](_0x3ed1fc):$(_0xbacab1(0xf0))[_0xbacab1(0x11b)](_0x3ed1fc);}function markAllNotificationsRead(){const _0x221163=_0x40a3e1;$[_0x221163(0x107)]({'url':_0x221163(0xed),'method':_0x221163(0x129),'data':{'action':_0x221163(0xfe)},'dataType':'json','success':function(_0x2152f3){const _0x420d17=_0x221163;_0x2152f3[_0x420d17(0x113)]==='success'&&(notificationCount=0x0,updateNotificationBadge(0x0),$(_0x420d17(0x123))['removeClass'](_0x420d17(0xef)));}});}function getTimeAgo(_0x2b185e){const _0x4dfb3e=_0x40a3e1,_0x2be50b=Math[_0x4dfb3e(0xf9)]((new Date()-_0x2b185e)/0x3e8);if(_0x2be50b<0x3c)return _0x4dfb3e(0x100);if(_0x2be50b<0xe10)return Math[_0x4dfb3e(0xf9)](_0x2be50b/0x3c)+_0x4dfb3e(0xe3);if(_0x2be50b<0x15180)return Math[_0x4dfb3e(0xf9)](_0x2be50b/0xe10)+_0x4dfb3e(0x11c);return Math[_0x4dfb3e(0xf9)](_0x2be50b/0x15180)+_0x4dfb3e(0xea);}function playNotificationSound(){const _0x10ffff=_0x40a3e1;!$(_0x10ffff(0x10d))[_0x10ffff(0x114)]&&$(_0x10ffff(0xdb))[_0x10ffff(0xd0)]('<audio\x20id=\x22notificationSound\x22\x20src=\x22sounds/notification.mp3\x22\x20preload=\x22auto\x22></audio>');const _0x14eba4=document[_0x10ffff(0x10b)](_0x10ffff(0x102));_0x14eba4&&(_0x14eba4[_0x10ffff(0xe8)]=0.3,_0x14eba4['play']()[_0x10ffff(0xdd)](_0x1b991e=>console[_0x10ffff(0xd6)]('Could\x20not\x20play\x20notification\x20sound:',_0x1b991e)));}const originalShowFriendsPanel=window[_0x40a3e1(0xd7)];window[_0x40a3e1(0xd7)]=function(){const _0x567385=_0x40a3e1;typeof originalShowFriendsPanel===_0x567385(0xd1)&&originalShowFriendsPanel(),checkFriendNotifications(),setTimeout(()=>{notificationCount>0x0&&markAllNotificationsRead();},0x3e8);},$(document)[_0x40a3e1(0x103)](function(){setTimeout(initFriendNotifications,0x1f4);});