/***************************************************************************/
/*                                                                         */
/*  This obfuscated code was created by Javascript Obfuscator Free Version.*/
/*  Javascript Obfuscator Free Version can be downloaded here              */
/*  http://javascriptobfuscator.com                                        */
/*                                                                         */
/***************************************************************************/
var _$_40cc=["now","undefined","type","user","length",".notification-badge","find","position","relative","css","<span class=\"notification-badge\" style=\"display:none;\">0</span>","append","each",".friends-btn","api/friends.php","GET","get_notifications","json","status","success","count","notifications",":visible","is","#friendsPanel","Failed to check notifications:","error","ajax","show","text","has-notifications","addClass","parent","hide","removeClass","from_avatar","default_avatar.jpg","\" class=\"notification-popup-avatar\">\x0D\x0A                <div class=\"notification-popup-content\">\x0D\x0A                    <div class=\"notification-popup-title\">","</div>\x0D\x0A                    <div class=\"notification-popup-message\">","message","</div>\x0D\x0A                </div>\x0D\x0A                <button class=\"notification-popup-close\" onclick=\"$(this).closest(\'.friend-notification-popup\').fadeOut()\">\xD7</button>\x0D\x0A            </div>\x0D\x0A        </div>\x0D\x0A    ","body","fadeIn","remove","fadeOut","/sounds/private_message_notification.mp3","play","New Friend Request","friend_request","Friend Request Accepted","friend_accepted","New Message","private_message","Notification","<div class=\"notifications-section mb-3\">","<h6 style=\"color: #e0e0e0;\"><i class=\"fas fa-bell\"></i> Notifications</h6>","<p class=\"text-muted small\">No new notifications</p>","created_at","is_read","unread","","\" data-id=\"","id","\">\x0D\x0A                    <img src=\"images/","\" class=\"notification-avatar\">\x0D\x0A                    <div class=\"notification-content\">\x0D\x0A                        <div class=\"notification-message\">","</div>\x0D\x0A                        <div class=\"notification-time\">","</div>\x0D\x0A                    </div>\x0D\x0A                </div>\x0D\x0A            ","forEach","<button class=\"btn btn-sm btn-secondary w-100 mt-2\" onclick=\"markAllNotificationsRead()\">Mark all as read</button>","</div>","#friendsList .notifications-section","replaceWith","prepend","#friendsList","POST","mark_read",".notification-item","floor","just now"," min ago"," hours ago"," days ago","#notificationSound","<audio id=\"notificationSound\" src=\"sounds/notification.mp3\" preload=\"auto\"></audio>","notificationSound","getElementById","volume","Could not play notification sound:","log","catch","showFriendsPanel","function","ready"];let notificationCount=0;let lastNotificationCheck=Date[_$_40cc[0]]();function initFriendNotifications(){if( typeof currentUser=== _$_40cc[1]|| currentUser[_$_40cc[2]]!== _$_40cc[3]){return};checkFriendNotifications();setInterval(checkFriendNotifications,5000);addNotificationBadge()}function addNotificationBadge(){$(_$_40cc[13])[_$_40cc[12]](function(){if(!$(this)[_$_40cc[6]](_$_40cc[5])[_$_40cc[4]]){$(this)[_$_40cc[9]](_$_40cc[7],_$_40cc[8]);$(this)[_$_40cc[11]](_$_40cc[10])}})}function checkFriendNotifications(){$[_$_40cc[27]]({url:_$_40cc[14],method:_$_40cc[15],data:{action:_$_40cc[16]},dataType:_$_40cc[17],success:function(_0x26DF1){if(_0x26DF1[_$_40cc[18]]=== _$_40cc[19]){const _0x26D9D=_0x26DF1[_$_40cc[20]];if(_0x26D9D> notificationCount&& notificationCount> 0){showNotificationPopup(_0x26DF1[_$_40cc[21]][0])};notificationCount= _0x26D9D;updateNotificationBadge(_0x26D9D);if($(_$_40cc[24])[_$_40cc[23]](_$_40cc[22])){updateNotificationList(_0x26DF1[_$_40cc[21]])}}},error:function(_0x26EED,_0x26E99,_0x26E45){console[_$_40cc[26]](_$_40cc[25],_0x26E45)}})}function updateNotificationBadge(_0x2718D){$(_$_40cc[5])[_$_40cc[12]](function(){if(_0x2718D> 0){$(this)[_$_40cc[29]](_0x2718D)[_$_40cc[28]]();$(this)[_$_40cc[32]]()[_$_40cc[31]](_$_40cc[30])}else {$(this)[_$_40cc[33]]();$(this)[_$_40cc[32]]()[_$_40cc[34]](_$_40cc[30])}})}function showNotificationPopup(_0x270E5){const _0x27139=$(("\x0D\x0A        <div class=\"friend-notification-popup\">\x0D\x0A            <div class=\"notification-popup-header\">\x0D\x0A                <img src=\"images/"+(_0x270E5[_$_40cc[35]]|| _$_40cc[36])+_$_40cc[37]+getNotificationTitle(_0x270E5[_$_40cc[2]])+_$_40cc[38]+_0x270E5[_$_40cc[39]]+_$_40cc[40]));$(_$_40cc[41])[_$_40cc[11]](_0x27139);_0x27139[_$_40cc[42]]();setTimeout(()=>{_0x27139[_$_40cc[44]](function(){$(this)[_$_40cc[43]]()})},5000);playFriendNotificationSound()}function playFriendNotificationSound(){const _0x2703D= new Audio(_$_40cc[45]);_0x2703D[_$_40cc[46]]()}function getNotificationTitle(_0x26F41){switch(_0x26F41){case _$_40cc[48]:return _$_40cc[47];case _$_40cc[50]:return _$_40cc[49];case _$_40cc[52]:return _$_40cc[51];default:return _$_40cc[53]}}function updateNotificationList(_0x27235){let _0x271E1=_$_40cc[54];_0x271E1+= _$_40cc[55];if(_0x27235[_$_40cc[4]]=== 0){_0x271E1+= _$_40cc[56]}else {_0x27235[_$_40cc[67]]((_0x27289)=>{const _0x272DD=getTimeAgo( new Date(_0x27289[_$_40cc[57]]));const _0x27331=_0x27289[_$_40cc[58]]== 0?_$_40cc[59]:_$_40cc[60];_0x271E1+= ("\x0D\x0A                <div class=\"notification-item "+_0x27331+_$_40cc[61]+_0x27289[_$_40cc[62]]+_$_40cc[63]+(_0x27289[_$_40cc[35]]|| _$_40cc[36])+_$_40cc[64]+_0x27289[_$_40cc[39]]+_$_40cc[65]+_0x272DD+_$_40cc[66])});_0x271E1+= _$_40cc[68]};_0x271E1+= _$_40cc[69];if($(_$_40cc[70])[_$_40cc[4]]){$(_$_40cc[70])[_$_40cc[71]](_0x271E1)}else {$(_$_40cc[73])[_$_40cc[72]](_0x271E1)}}function markAllNotificationsRead(){$[_$_40cc[27]]({url:_$_40cc[14],method:_$_40cc[74],data:{action:_$_40cc[75]},dataType:_$_40cc[17],success:function(_0x26DF1){if(_0x26DF1[_$_40cc[18]]=== _$_40cc[19]){notificationCount= 0;updateNotificationBadge(0);$(_$_40cc[76])[_$_40cc[34]](_$_40cc[59])}}})}function getTimeAgo(_0x26F95){const _0x26FE9=Math[_$_40cc[77]](( new Date()- _0x26F95)/ 1000);if(_0x26FE9< 60){return _$_40cc[78]};if(_0x26FE9< 3600){return Math[_$_40cc[77]](_0x26FE9/ 60)+ _$_40cc[79]};if(_0x26FE9< 86400){return Math[_$_40cc[77]](_0x26FE9/ 3600)+ _$_40cc[80]};return Math[_$_40cc[77]](_0x26FE9/ 86400)+ _$_40cc[81]}function playNotificationSound(){if(!$(_$_40cc[82])[_$_40cc[4]]){$(_$_40cc[41])[_$_40cc[11]](_$_40cc[83])};const _0x2703D=document[_$_40cc[85]](_$_40cc[84]);if(_0x2703D){_0x2703D[_$_40cc[86]]= 0.3;_0x2703D[_$_40cc[46]]()[_$_40cc[89]]((_0x27091)=>{return console[_$_40cc[88]](_$_40cc[87],_0x27091)})}}const originalShowFriendsPanel=window[_$_40cc[90]];window[_$_40cc[90]]= function(){if( typeof originalShowFriendsPanel=== _$_40cc[91]){originalShowFriendsPanel()};checkFriendNotifications();setTimeout(()=>{if(notificationCount> 0){markAllNotificationsRead()}},1000)};$(document)[_$_40cc[92]](function(){setTimeout(initFriendNotifications,500)})